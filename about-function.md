---
description: 関数について、ざっくり説明します。
---

# 😇 about function 途中まで

### 関数が無い場合

例えば、以下のような内容を考えます。

```php
// 以下の３行を１０回繰り返す。
echo 'hello';
echo 'world';
echo "I'm from japan";
```

この場合、

1. この３行をコピペして、
2. １０回貼り付ける

という方法が考えられます。 ただし、ちょっとめんどくさいです。

```php
// イメージ
echo 'hello';
echo 'world';
echo "I'm from japan";

echo 'hello';
echo 'world';
echo "I'm from japan";

echo 'hello';
echo 'world';
echo "I'm from japan";

// ...以下省略
```

こういった、`複数行の処理`を、何かしらの理由で`複数回記述する必要が有る`場合、関数が便利です。

### 関数の基本

まず、関数は以下の順番で処理をします。

1. 関数を用意する。
2. 関数を実行する。

時々、関数を用意しただけで関数を実行した気になってしまう方がいますが、ちゃんと「用意→実行」が関数の基本です。

#### 関数の書き方

基本フォーマットは以下のとおりです。 `func_test`という名前の関数を用意してみます。

そしてそれを実行します。

```php
// (1)まずは関数を用意。
function func_test() {
    // 処理を書く
}

// (2)用意した関数を実行する。
// 実行するときは、関数名とカッコを付ける。
func_test();
```

![](<.gitbook/assets/名称未設定のノート-6 2.jpg>)

#### 関数の書き方(具体例)

それでは、例題で具体的にやってみましょう。

1. 関数の作成
   * 関数名の命名
   * 処理を記述
2. 関数の実行

の順番で対応します。

今回の関数は、`greeting`という名前にしましょう

```php
// (1)まずは関数を用意。
function greeting() {
    // 処理を書く
    echo 'hello';
    echo 'world';
    echo "I'm from japan";
}

// (2)用意した関数を実行する。
greeting();
```

これで、`greeting()`と書くたびに、処理の中身３行が実行されます。

```php
function greeting() {
    echo 'hello';
    echo 'world';
    echo "I'm from japan";
}
greeting();
greeting();
greeting();
greeting();
greeting();
greeting();
greeting();
greeting();
greeting();
greeting();
```

関数を利用すると行数をぐっと減らすことができます。 実際、１５行になりました。

#### 余談

単純に連続するだけなら、あまり恩恵を感じ取りづらいかもしれませんが、 離れたところで同じ処理をする場合に関数はとても便利です。

```php
function greeting() {
    echo 'hello';
    echo 'world';
    echo "I'm from japan";
}
// ここに100行くらいコードが有ると思ってください
greeting();
// ここに100行くらいコードが有ると思ってください
greeting();
// ここに100行くらいコードが有ると思ってください
greeting();
```

こんな感じで、離れたところで複数回処理をする場合、 関数が有るともっと便利です。 しかも、自分がつけた名前から、この関数がどのような処理をするかがなんとなくわかるのです。 ※よって、命名する際の名前は超重要になってきます。

### 関数の基本(引数編)

同じ処理をする場合「似た処理なんだけど若干違う処理」をしたい場合があります。

例えば、以下の処理を考えて見ましょう。

* ３つ有る三角形の面積を求めましょう。どの三角形も底辺は5cmで、高さがそれぞれ2cm,4cm, 6cmです。

さて、ご存知の通り三角形は、 `底辺 * 高さ / 2`で求めることが可能です。

今回は底辺は一緒ですが、高さだけが異なります。

さて、まずは上記で学んだとおり、それぞれの面積を求める関数を作って見ましょう。

```php
//１つ目
function getTriangleArea1() {
    echo (5 * 2 / 2);
}

//2つ目
function getTriangleArea2() {
    echo (5 * 4 / 2);
}

//3つ目
function getTriangleArea3() {
    echo (5 * 6 / 2);
}

getTriangleArea1();
getTriangleArea2();
getTriangleArea3();
```

なんだか微妙ですね。。。。 なぜなら、めちゃくちゃ似ている内容が、複数書かれているからです。 「どの関数も内容がめちゃくちゃ似てる」のです。

逆に、

* 関数名
* 掛け算の部分 以外は同じです。

![](.gitbook/assets/getTriangleArea.jpg)

少し抽象化すると以下のように表せると思います。

```php
function getTriangleArea() {
    echo (5 * 高さ / 2);
}
```

このように、高さの部分だけを変えれば３つの三角形の面積がわかります。&#x20;

その際に役立つのが`引数`です。

上記例でいうと、高さの部分に入れたい数字をgetTriangleAreaの右側にある()の中に書いてあげることで、数字を渡すことができます。。

1. まず漢字で書くとこうです。

```php
function getTriangleArea(高さ) {
    echo (5 * 高さ / 2);
}
```

1. 漢字のままだとエラーになるので、関数定義の引数は変数に変更します。

```php
function getTriangleArea($hight) {
    echo (5 * $hight / 2);
}
```

※変数名はなんでもいいです。 `$hight`じゃなくて、`$h`とか`$aaaa`とかでも良いです。 ただし、何を表すのかわかりやすいように変数名を書いてください。 今回は三角形の「高さ」なのでhightとしました。

1. 実行するときは、高さを書いて実行してあげてください。

```php
// ↓例えば、下の場合は高さを10にした場合です。
getTriangleArea(10);
```

結果として、`25`という値が表示されます。

![](.gitbook/assets/引数.jpg)

例えば、以下のようにしたらどのような数字が出てくるでしょうか？

```php
function num($num) {
    echo (5 * $num * $num * $num / 2);
}

num(10);
```

こうすると、`$num`の部分は10に置き換わるので、 `5 * 10 * 10 * 10 / 2`という計算がされます。

#### 複数の引数を与える

上記の`getTriangleArea()`では、底辺の長さは固定されており、高さは引数で与えるというものでした。

では、底辺の長さも固定されておらず与えられた場合はどうすればいいでしょうか。

その場合、引数を複数与えれば良いです。

1. まず、底辺（=5）が固定されている場合は以下の通りでした。

```php
function getTriangleArea(高さ) {
    echo (5 * 高さ / 2);
}
```

1. 底辺も引数で与える場合は以下のとおりです。コンマつけて羅列してあげてください。

```php
function getTriangleArea(高さ, 底辺) {
    echo (底辺 * 高さ / 2);
}
```

1. 漢字を変数にしてあげましょう。

```php
function getTriangleArea($hight, $bottom) {
    echo ($bottom * $hight / 2);
}
```

1. 実際に関数を利用しましょう。

```php
getTriangleArea(2, 3);

// 3

```

※ 引数の順番が違っても問題ないです。
例えば以下でもokです。
というか、左が底辺・右が高さで統一されているので、こっちのほうがきれいかも。

```php
function getTriangleArea($bottom, $hight) {
    echo ($bottom * $hight / 2);
}
```

##### 例題-1

以下のような関数を作って、実行してください。

* 四角形の面積を求める関数を作りましょう。
* 関数名は`calcSquares`
* 縦の長さは10cm
* よこの長さは引数で渡してあげる。

* よこの長さを5cm、10cmにした場合の面積を求めてください。

<details>
<summary>答え</summary>

```php

// $widthは別の変数名でも良いです。

function calcSquares($width) {
    // echo $width * 10;とかでも良いです。
    echo 10 * $width;
}

calcSquares(5);
calcSquares(10);


```

</details>

##### 例題-2

以下のような関数を作って、実行してください。

* 関数（関数名は自分で決めてください。）を作成し、引数を利用して「私の名前は`名字` `名前` です」と`echo`されるようにしてください。
* 実際に引数に自分の名前を与えて出力してみてください。

<details>
<summary>答え</summary>

```php

// 以下、書き方等は任せます。引数使って出力できればok

$myouji = '福島';
$namae = 'はやと';


function aisatsu($myouji, $namae) {
    echo '私の名前は' . $myouji . $namae 'です';
}

aisatsu($myouji, $namae);

```

</details>

### スコープについて

さて、一旦関数の特別な動きについてお伝えします。

スコープという考えです。（どの言語にもたいてい有り。）

定義した変数等がどこまで影響を及ぼすのか？ということです。

例えば、以下のようなコードを実行してみてください。

```php

$name = '福島';
$name = 'はやと';
echo $name;

```

こうすると、出力は`はやと`と出てきます。
最初「福島」を変数に代入しましたが、次に「はやと」と上書きしたためです。

では以下はどうでしょうか？

```php

$name = '福島';

function change() {
    $name = 'はやと';
}

change();

echo $name;

```

上から順番の流れはこんな感じです。

1. `$name`に「福島」と代入
2. 関数`change()`を定義
3. 関数を実行
4. `$name`を出力

最初に`$name`に「福島」を代入したあと、次に「はやと」を代入する関数を実行したから「はやと」と出力されても良いような気もしますが、実際にはそうなっていません。

これは関数内には、関数の外の影響を受けない独自の世界が広がっているためです。

この有効範囲のことをスコープといいます。
functionの中は外界とは違う閉ざされた世界なので、`ローカルスコープ(ローカル)`といったリします。

一方ローカルスコープの外 = functionの中以外 = ほぼすべての箇所は`グローバルスコープ(グローバル)`と言います。

function内は、`ローカル`なので、`functionの外の$name`と`functionの中の$name`は違います。
だから、echo $nameしても、中身が変わっていないのです。

```php

// ↓これはグローバル
$name = '福島';

function change() {
    // ここはローカル
    // この中で変数を定義しても外の世界に影響なし。
    $name = 'はやと';
}
change();

// ここでechoしているのは、グローバル = '福島'が代入されている$name
echo $name;

```

**このように、functionの中と外は世界が違うので互いに影響し合いません**
